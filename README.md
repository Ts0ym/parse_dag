DNS Catalog Parsing DAG

Этот проект использует Apache Airflow для автоматизации процесса парсинга каталога товаров с сайта DNS и сохранения полученных данных в базе данных PostgreSQL.

Структура проекта

Проект состоит из следующих основных компонентов:

- DAG `parse_dns_dag`: Основной DAG, выполняющий три задачи: создание таблицы, парсинг данных и загрузка данных в базу данных.
- DNSParser: Класс, реализующий логику парсинга каталога DNS с использованием Selenium и BeautifulSoup.
- DNSProduct: Класс, представляющий объект товара, включающий всю необходимую информацию о продукте.

Установка

1. Клонируйте репозиторий на локальную машину:

   git clone <URL вашего репозитория>
   cd <название директории проекта>

2. Установите необходимые зависимости:

   pip install -r requirements.txt

   Обратите внимание, что для работы с Selenium может потребоваться установка браузера Chrome и драйвера ChromeDriver.

3. Настройте подключение к базе данных PostgreSQL в Airflow, создав соединение с ID `postgres_default`.

Описание задач DAG

- create_table: Создает таблицу `products` в базе данных PostgreSQL, если она не существует. Таблица предназначена для хранения информации о товарах, полученной в результате парсинга.

- parse_products: Выполняет парсинг каталога сайта DNS, используя переданный путь к категории. Результаты парсинга временно сохраняются в файл на локальной файловой системе.

- load_products: Загружает спарсенные данные из временного файла в базу данных PostgreSQL и удаляет временный файл.

Запуск DAG

1. Убедитесь, что Airflow запущен и настроен должным образом.

2. Перенесите DAG в директорию Airflow DAGs (обычно это ~/airflow/dags).

3. В веб-интерфейсе Airflow активируйте DAG `parse_dns_dag`.

4. DAG будет автоматически запускаться ежедневно, согласно настройкам `schedule_interval`.

Лицензия

Этот проект лицензирован под MIT License. Для получения дополнительной информации ознакомьтесь с файлом LICENSE.

Дополнительные инструкции

- Тестирование: Рекомендуется протестировать парсер на небольших категориях товаров перед запуском на больших объемах данных, чтобы убедиться в его корректной работе.
- Настройка PostgreSQL: Убедитесь, что база данных PostgreSQL настроена и доступна для подключения. Настройки подключения можно изменить в интерфейсе Airflow.

Обратная связь

Если у вас возникли вопросы или предложения по улучшению проекта, не стесняйтесь создавать `Issue` или отправлять `Pull Request`.
